{% extends 'base.html' %}
{% load codalab_tags %}

{% block head_title %}Detailed results of the participant {{ user }}{% endblock head_title %}
{% block page_title %}
    <div class="row">
        <div class="col-md-8">
            <h2 class="comp-title">Detailed results of the participant {{ user }}</h2>
        </div>
        <div style="text-align: right;" class="col-md-4">
            <button id="refresh_detailed_results" style="margin-top: 3vh;" class="btn btn-primary">Refresh Iframe</button>
        </div>
    </div>
{% endblock page_title %}
{% block extra_scripts %}
    <style>
        .comp-title {
            display: inline-block;
        }

        @media only screen and (max-width: 600px) {
            .comp-title {
                display: block;
                font-size: 18px;
                line-height: 0;
            }
        }
    </style>
{% endblock %}
{% block content %}
        <div align="center">
            <iframe
                    {% if not submission.phase.is_parallel_parent %}
                        style="width: 80vw; height: 100vh;"
                    {% else %}
                        style="width: 80vw; height: 500vh;"
                    {% endif %}
                    id="detailed_results_frame"
                    align="center"
                    sandbox="allow-scripts"
                    frameborder="0"
                    scrolling="no"
                    src="{% url "competitions:my_competition_output" submission_id=submission.pk filetype='detailed_results.html' %}"
            ></iframe>
        </div>
{% endblock %}

{% block jsincludes %}
    <script>
        $('#refresh_detailed_results').on('click', function() {
            var local_iframe = document.getElementById('detailed_results_frame');
            local_iframe.src = local_iframe.src;
        })
    </script>
{% endblock %}